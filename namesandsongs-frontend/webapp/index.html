<!doctype html>
<html lang="en" ng-app="songApp">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <script type='text/JavaScript' src="../../admin/lib/angular/email.js"></script>
    <script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.5/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.5/angular-resource.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.5/angular-route.min.js"></script>
    <script type='text/JavaScript' src="../../admin/lib/angular/ng-grid-2.0.7.debug.js"></script>
    <script type='text/JavaScript' src="../../admin/lib/angular/angular-mocks.js"></script>
    <script type='text/JavaScript' src="../../admin/lib/angular/ng-table.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../admin/img/favicon.png">
    <title>Voornaam in liedje: Een verzameling van populaire liedjes met voornamen in de titel</title>
    <!-- Bootstrap core CSS -->
    <link href="../../admin/lib/bootstrap3/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../../admin/css/ng-grid.css" />
    <link rel="stylesheet" href="../../admin/css/bootstrap.css">
    <link rel="stylesheet" href="../../admin/css/ng-table.css">
    <!-- Custom styles for this template -->
    <link href="../../admin/css/style.css" rel="stylesheet">
    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../docs-assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
</head>

<body>
    <div class="container">
        <div class="header">
            <h3 class="text-muted text-center">Voornaam in liedje</h3>
        </div>
        <div class="row">
            <!--div class="col-lg-6 inhoudBoven" ng-controller="SongListCtrl"-->

            <div class="col-lg-6 inhoudBoven" ng-controller="DemoCtrl">

                <button ng-click="tableParams.reload()" class="btn pull-right">Reload</button>
                <button ng-click="tableParams.sorting({})" class="btn pull-right">Clear sorting</button>
                <div class="clearfix"></div>

                <div loading-container="tableParams.settings().$loading">
                    <table ng-table="tableParams" show-filter="true" class="table">
                        <tr ng-repeat="song in $data">
                            <td data-title="'Artiest'" filter="{ 'artist': 'text' }" sortable="'artist'">
                                {{song.artist}}
                            </td>
                            <td data-title="'Titel'" filter="{ 'title': 'text' }" sortable="'title'">
                                {{song.title}}
                            </td>
                        </tr>
                    </table>
                </div>

            </div>
            <div class="col-lg-1"></div>
            <div class="col-lg-5 inhoudBoven" ng-controller="SongOfTheDayCtrl">
                <h4>Lied van de dag</h4>
                <h5><i>{{songOfTheDay.title}}</i> van <i>{{songOfTheDay.artist}}</i>
                </h5>
                <p>
                    {{songOfTheDay.background}}
                </p>
            </div>
        </div>
        <div class="row horizontalDivider"></div>
        <div class="row">
            <div class="col-lg-4 inhoudOnder">
                <h4>Spelregels.</h4>
                <p>Mocht je nog een nummer weten dat niet in de lijst staat, dan horen we dat natuurlijk graag. Nummers uit alle talen zijn welkom. Voorwaarde is dat er een voornaam in de titel van het nummer zit. Het nummer moet op een uitgebrachte singel of album staan, en het moet uit de tekst af te leiden zijn dat het daadwerkelijk een voornaam betreft in het nummer. Je kunt nieuwe nummers melden aan <b><i><script>mail("info", "ovroanmaniildeejn?l", -2, "")</script></i></b>.</p>
            </div>
            <div class="col-lg-1"></div>
            <!-- div class="col-lg-7 inhoudOnder" ng-controller="SongOfTheDayCtrl"-->
            <div class="col-lg-7 inhoudOnder">
                <h4>Youtube</h4>

                <div id="player">Loading...</div>

            </div>



        </div>
        <div class="row horizontalDivider"></div>
        <div class="footer text-left">
            <p>&copy; 2014 by Remco Weekers</p>
        </div>
    </div>
    <!-- /container -->
    <!-- Bootstrap core JavaScript
      ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script type='text/JavaScript' src="../../admin/lib/angular/browserDetect.js"></script>
    <script type='text/JavaScript' src="../../admin/js/logSearchInstruction.js"></script>
    <script type='text/JavaScript' src="../../admin/lib/bootstrap3/js/bootstrap.min.js"></script>
    <script type='text/JavaScript' src="../../admin/js/songServices.js"></script>
    <script type='text/JavaScript' src="../../admin/js/songApp.js"></script>
    <script type='text/JavaScript' src="../../admin/js/songControllers.js"></script>
    <!--script type='text/JavaScript' src="../../admin/js/youtube.js"></script-->
    <script>
    function isNumber(n) {
        return !isNaN(parseFloat(n)) && isFinite(n);
    }
    var app = angular.module('songApp', ['ngTable', 'ngResource', 'ngMockE2E', 'songControllers', 'songServices']).
    run(function($httpBackend, $filter, $log, ngTableParams, Song2) {
        $httpBackend.whenGET(/.*/).passThrough();
    })
        .directive('loadingContainer', function() {
            return {
                restrict: 'A',
                scope: false,
                link: function(scope, element, attrs) {
                    var loadingLayer = angular.element('<div class="loading"></div>');
                    element.append(loadingLayer);
                    element.addClass('loading-container');
                    scope.$watch(attrs.loadingContainer, function(value) {
                        loadingLayer.toggleClass('ng-hide', !value);
                    });
                }
            };
        })
        .controller('DemoCtrl', function($scope, $timeout, $resource, ngTableParams, Song2) {
            console.log("Nummers ophalen...");
            var Api = $resource('/data');

            $scope.tableParams = new ngTableParams({
                page: 1, // show first page
                count: 10, // count per page
                sorting: {
                    artist: 'asc' // initial sorting
                }
            }, {
                total: 0, // length of data
                getData: function($defer, params) {
                    // ajax request to api

                    console.log("tableParams count " + $scope.tableParams.$params.count);
                    console.log("tableParams order " + $scope.tableParams.$params.sorting.artist);
                    console.log("tableParams filterartist " + $scope.tableParams.$params.filter.artist);
                    console.log("tableParams filtertitle " + $scope.tableParams.$params.filter.title);

                    data = Song2.query({
                        count: $scope.tableParams.$params.count,
                        page: $scope.tableParams.$params.page - 1,
                        sortingArtist: $scope.tableParams.$params.sorting.artist,
                        sortingTitle: $scope.tableParams.$params.sorting.title,
                        filterArtist: $scope.tableParams.$params.filter.artist,
                        filterTitle: $scope.tableParams.$params.filter.title
                    });
                    params.total(700);
                    $defer.resolve(data);

                }
            });
        })
    </script>
</body>

</html>
